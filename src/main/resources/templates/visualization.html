<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>All-in-One Visualizer Lab</title>

<link rel="stylesheet" href="/css/style.css">

<style>
.lab-grid{
    display:grid;
    grid-template-columns:1fr;
    gap:40px;
}
.mini-visualizer{
    min-height:150px;
    padding:20px;
    margin-top:15px;
    overflow-x:auto;
}
.message{
    margin-top:10px;
    font-weight:600;
    color:var(--accent);
}
</style>
</head>

<body>

<div class="navbar">
    <h2>Data Structures Lab</h2>
    <a href="/topics">Back to Topics</a>
</div>

<div class="container">

<div class="card">
<h2>Array / ArrayList Visualizer</h2>

<div class="controls">
<input id="arrValue" type="number" placeholder="Value">
<button onclick="arrInsert()">Insert</button>
<button class="danger" onclick="arrDelete()">Delete</button>
</div>

<div id="arrMsg" class="message">Ready.</div>
<div id="arr-container" class="visualizer-container mini-visualizer"></div>
</div>


<div class="card">
<h2>Stack Visualizer (LIFO)</h2>

<div class="controls">
<input id="stackValue" type="text" placeholder="Value">
<button onclick="stackPush()">Push</button>
<button class="danger" onclick="stackPop()">Pop</button>
</div>

<div id="stack-container"
class="visualizer-container mini-visualizer"
style="flex-direction:column-reverse;"></div>
</div>


<div class="card">
<h2>Queue Visualizer (FIFO)</h2>

<div class="controls">
<input id="queueValue" type="text" placeholder="Value">
<button onclick="queueEnqueue()">Enqueue</button>
<button class="danger" onclick="queueDequeue()">Dequeue</button>
</div>

<div id="queue-container" class="visualizer-container mini-visualizer"></div>
</div>

</div>

<!-- ================= JAVASCRIPT ================= -->
<script>
document.addEventListener("DOMContentLoaded", () => {

/* ================= UTIL ================= */
const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

/* ================= ARRAY ================= */
let arrayData = [10,20,30];
const arrContainer = document.getElementById("arr-container");

function renderArray(active=-1){
    arrContainer.innerHTML="";
    arrayData.forEach((val,i)=>{
        const cell=document.createElement("div");
        cell.className="cell";
        cell.innerText=val;
        if(i===active) cell.style.background="var(--success)";
        arrContainer.appendChild(cell);
    });
}

window.arrInsert=function(){
    const v=document.getElementById("arrValue").value;
    if(!v) return;
    arrayData.push(parseInt(v));
    renderArray();
}

window.arrDelete=function(){
    arrayData.pop();
    renderArray();
}

/* ================= STACK ================= */
let stackData=["A","B"];
const stackContainer=document.getElementById("stack-container");

function renderStack(){
    stackContainer.innerHTML="";
    stackData.forEach(v=>{
        const node=document.createElement("div");
        node.className="node";
        node.innerText=v;
        stackContainer.appendChild(node);
    });
}

window.stackPush=function(){
    const v=document.getElementById("stackValue").value;
    if(!v) return;
    stackData.push(v);
    renderStack();
}

window.stackPop=function(){
    stackData.pop();
    renderStack();
}

/* ================= QUEUE ================= */
let queueData=["Q1","Q2"];
const queueContainer=document.getElementById("queue-container");

function renderQueue(){
    queueContainer.innerHTML="";
    queueData.forEach(v=>{
        const node=document.createElement("div");
        node.className="node";
        node.innerText=v;
        queueContainer.appendChild(node);
    });
}

window.queueEnqueue=function(){
    const v=document.getElementById("queueValue").value;
    if(!v) return;
    queueData.push(v);
    renderQueue();
}

window.queueDequeue=function(){
    queueData.shift();
    renderQueue();
}

/* ================= INITIAL RENDER ================= */
renderArray();
renderStack();
renderQueue();

});
</script>

</body>
</html>