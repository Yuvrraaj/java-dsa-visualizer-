<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DSA Visualizer Lab</title>

<link rel="stylesheet" href="/css/style.css">

<style>
.container{width:90%;margin:auto;}
.card{
    margin:35px 0;
    padding:25px;
    background:#f8fafc;
    border-radius:12px;
}
.visualizer{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    margin-top:15px;
}
.box,.node{
    padding:10px 14px;
    border:2px solid #2563eb;
    border-radius:6px;
    background:white;
    font-weight:bold;
}
canvas{
    border:1px dashed #94a3b8;
    margin-top:15px;
}
</style>
</head>

<body>

<div class="navbar">
<h2>Data Structures Lab</h2>
<a href="/topics">Back</a>
</div>

<div class="container">

<!-- ================= ARRAY ================= -->
<div class="card">
<h2>Array</h2>
<input id="arrVal" placeholder="Value">
<button onclick="arrInsert()">Insert</button>
<button onclick="arrDelete()">Delete Last</button>
<div id="arrayBox" class="visualizer"></div>
</div>

<!-- ================= STACK ================= -->
<div class="card">
<h2>Stack (LIFO)</h2>
<input id="stackVal" placeholder="Value">
<button onclick="stackPush()">Push</button>
<button onclick="stackPop()">Pop</button>
<div id="stackBox" class="visualizer"></div>
</div>

<!-- ================= QUEUE ================= -->
<div class="card">
<h2>Queue (FIFO)</h2>
<input id="queueVal" placeholder="Value">
<button onclick="queueAdd()">Enqueue</button>
<button onclick="queueRemove()">Dequeue</button>
<div id="queueBox" class="visualizer"></div>
</div>

<!-- ================= LINKED LIST ================= -->
<div class="card">
<h2>Singly Linked List</h2>
<input id="llVal" placeholder="Value">
<button onclick="llInsert()">Insert Tail</button>
<button onclick="llDelete()">Delete Tail</button>
<div id="llBox" class="visualizer"></div>
</div>

<!-- ================= TREE ================= -->
<div class="card">
<h2>Binary Search Tree</h2>
<input id="treeVal" placeholder="Value">
<button onclick="treeInsert()">Insert</button>
<button onclick="treeClear()">Clear</button>
<canvas id="treeCanvas" width="800" height="300"></canvas>
</div>

<!-- ================= GRAPH ================= -->
<div class="card">
<h2>Graph Visualizer</h2>
<input id="edgeU" placeholder="Node A">
<input id="edgeV" placeholder="Node B">
<button onclick="addEdge()">Connect</button>
<button onclick="clearGraph()">Clear</button>
<canvas id="graphCanvas" width="800" height="300"></canvas>
</div>

</div>

<script>
document.addEventListener("DOMContentLoaded",()=>{

/* ================= ARRAY ================= */
let arr=[10,20,30];
const arrayBox=document.getElementById("arrayBox");

function renderArray(){
arrayBox.innerHTML="";
arr.forEach(v=>{
const d=document.createElement("div");
d.className="box";
d.innerText=v;
arrayBox.appendChild(d);
});
}
window.arrInsert=()=>{
const v=arrVal.value;
if(v) arr.push(v);
renderArray();
}
window.arrDelete=()=>{
arr.pop();
renderArray();
}
renderArray();

/* ================= STACK ================= */
let stack=["A","B"];
const stackBox=document.getElementById("stackBox");

function renderStack(){
stackBox.innerHTML="";
stack.forEach(v=>{
const d=document.createElement("div");
d.className="node";
d.innerText=v;
stackBox.appendChild(d);
});
}
window.stackPush=()=>{
if(stackVal.value) stack.push(stackVal.value);
renderStack();
}
window.stackPop=()=>{
stack.pop();
renderStack();
}
renderStack();

/* ================= QUEUE ================= */
let queue=["Q1","Q2"];
const queueBox=document.getElementById("queueBox");

function renderQueue(){
queueBox.innerHTML="";
queue.forEach(v=>{
const d=document.createElement("div");
d.className="node";
d.innerText=v;
queueBox.appendChild(d);
});
}
window.queueAdd=()=>{
if(queueVal.value) queue.push(queueVal.value);
renderQueue();
}
window.queueRemove=()=>{
queue.shift();
renderQueue();
}
renderQueue();

/* ================= LINKED LIST ================= */
let linked=[5,10];
const llBox=document.getElementById("llBox");

function renderLL(){
llBox.innerHTML="";
linked.forEach(v=>{
const d=document.createElement("div");
d.className="node";
d.innerText=v+" â†’";
llBox.appendChild(d);
});
}
window.llInsert=()=>{
if(llVal.value) linked.push(llVal.value);
renderLL();
}
window.llDelete=()=>{
linked.pop();
renderLL();
}
renderLL();

/* ================= TREE ================= */
class Node{
constructor(v){this.val=v;this.left=null;this.right=null;this.x=0;this.y=0;}
}

let root=new Node(50);
root.left=new Node(30);
root.right=new Node(70);

const tCanvas=document.getElementById("treeCanvas");
const tCtx=tCanvas.getContext("2d");

function layout(n,x,y,off){
if(!n)return;
n.x=x;n.y=y;
layout(n.left,x-off,y+60,off/2);
layout(n.right,x+off,y+60,off/2);
}

function drawTree(n){
if(!n)return;

if(n.left){
tCtx.beginPath();
tCtx.moveTo(n.x,n.y);
tCtx.lineTo(n.left.x,n.left.y);
tCtx.stroke();
drawTree(n.left);
}
if(n.right){
tCtx.beginPath();
tCtx.moveTo(n.x,n.y);
tCtx.lineTo(n.right.x,n.right.y);
tCtx.stroke();
drawTree(n.right);
}

tCtx.beginPath();
tCtx.arc(n.x,n.y,18,0,Math.PI*2);
tCtx.fillStyle="white";
tCtx.fill();
tCtx.stroke();
tCtx.fillStyle="black";
tCtx.textAlign="center";
tCtx.textBaseline="middle";
tCtx.fillText(n.val,n.x,n.y);
}

function renderTree(){
tCtx.clearRect(0,0,tCanvas.width,tCanvas.height);
layout(root,tCanvas.width/2,40,tCanvas.width/4);
drawTree(root);
}

window.treeInsert=()=>{
const v=parseInt(treeVal.value);
if(isNaN(v)) return;
let cur=root;
while(true){
if(v<cur.val){
if(!cur.left){cur.left=new Node(v);break;}
cur=cur.left;
}else{
if(!cur.right){cur.right=new Node(v);break;}
cur=cur.right;
}
}
renderTree();
}

window.treeClear=()=>{
root=null;
tCtx.clearRect(0,0,tCanvas.width,tCanvas.height);
}

renderTree();

/* ================= GRAPH ================= */
const gCanvas=document.getElementById("graphCanvas");
const gCtx=gCanvas.getContext("2d");

let nodes=[];
let edges=[];
let id=0;

gCanvas.addEventListener("click",(e)=>{
const rect=gCanvas.getBoundingClientRect();
nodes.push({id:id++,x:e.clientX-rect.left,y:e.clientY-rect.top});
renderGraph();
});

window.addEdge=()=>{
const u=parseInt(edgeU.value);
const v=parseInt(edgeV.value);
edges.push({u,v});
renderGraph();
}

function renderGraph(){
gCtx.clearRect(0,0,gCanvas.width,gCanvas.height);

edges.forEach(e=>{
const a=nodes.find(n=>n.id===e.u);
const b=nodes.find(n=>n.id===e.v);
if(!a||!b)return;
gCtx.beginPath();
gCtx.moveTo(a.x,a.y);
gCtx.lineTo(b.x,b.y);
gCtx.stroke();
});

nodes.forEach(n=>{
gCtx.beginPath();
gCtx.arc(n.x,n.y,18,0,Math.PI*2);
gCtx.fillStyle="white";
gCtx.fill();
gCtx.stroke();
gCtx.fillStyle="black";
gCtx.fillText(n.id,n.x,n.y);
});
}

window.clearGraph=()=>{
nodes=[];
edges=[];
renderGraph();
}

});
</script>

</body>
</html>